{"version":3,"sources":["modules/dropdown.js"],"names":["angular","trigger","provider","container","this","defaults","keyboard","html","delay","placement","bodyEl","matchesSelector","DropdownFactory","$dropdown","options","element","evt","keyCode","onBodyClick","directive","target","hide","stopPropagation","items","$element","$new","querySelectorAll","parentEl","index","forEach","preventDefault","focus","length","show","el","i","$onKeyDown","on","hasClass","removeClass","destroy","scope","parent","prototype","tAttrs","nextSibling","nodeType","$window","$sce","restrict","compile","template","templateUrl","parentNode","removeChild","undefined","falseValueRegExp","attr","bsDropdown","key","$watch","newValue","oldValue","dropdown","isDefined","isString","bsShow","match","$on"],"mappings":"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","file":"modules/dropdown.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.dropdown', ['mgcrea.ngStrap.tooltip'])\r\n\r\n  .provider('$dropdown', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      prefixClass: 'dropdown',\r\n      prefixEvent: 'dropdown',\r\n      placement: 'bottom-left',\r\n      templateUrl: 'dropdown/dropdown.tpl.html',\r\n      trigger: 'click',\r\n      container: false,\r\n      keyboard: true,\r\n      html: false,\r\n      delay: 0\r\n    };\r\n\r\n    this.$get = function ($window, $rootScope, $tooltip, $timeout) {\r\n\r\n      var bodyEl = angular.element($window.document.body);\r\n      var matchesSelector = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector;\r\n\r\n      function DropdownFactory (element, config) {\r\n\r\n        var $dropdown = {};\r\n\r\n        // Common vars\r\n        var options = angular.extend({}, defaults, config);\r\n        /* var scope = */$dropdown.$scope = options.scope && options.scope.$new() || $rootScope.$new();\r\n\r\n        $dropdown = $tooltip(element, options);\r\n        var parentEl = element.parent();\r\n\r\n        // Protected methods\r\n\r\n        $dropdown.$onKeyDown = function (evt) {\r\n          if (!/(38|40)/.test(evt.keyCode)) return;\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n\r\n          // Retrieve focused index\r\n          var items = angular.element($dropdown.$element[0].querySelectorAll('li:not(.divider) a'));\r\n          if (!items.length) return;\r\n          var index;\r\n          angular.forEach(items, function (el, i) {\r\n            if (matchesSelector && matchesSelector.call(el, ':focus')) index = i;\r\n          });\r\n\r\n          // Navigate with keyboard\r\n          if (evt.keyCode === 38 && index > 0) index--;\r\n          else if (evt.keyCode === 40 && index < items.length - 1) index++;\r\n          else if (angular.isUndefined(index)) index = 0;\r\n          items.eq(index)[0].focus();\r\n\r\n        };\r\n\r\n        // Overrides\r\n\r\n        var show = $dropdown.show;\r\n        $dropdown.show = function () {\r\n          show();\r\n          // use timeout to hookup the events to prevent\r\n          // event bubbling from being processed imediately.\r\n          $timeout(function () {\r\n            if (options.keyboard && $dropdown.$element) $dropdown.$element.on('keydown', $dropdown.$onKeyDown);\r\n            bodyEl.on('click', onBodyClick);\r\n          }, 0, false);\r\n          if (parentEl.hasClass('dropdown')) parentEl.addClass('open');\r\n        };\r\n\r\n        var hide = $dropdown.hide;\r\n        $dropdown.hide = function () {\r\n          if (!$dropdown.$isShown) return;\r\n          if (options.keyboard && $dropdown.$element) $dropdown.$element.off('keydown', $dropdown.$onKeyDown);\r\n          bodyEl.off('click', onBodyClick);\r\n          if (parentEl.hasClass('dropdown')) parentEl.removeClass('open');\r\n          hide();\r\n        };\r\n\r\n        var destroy = $dropdown.destroy;\r\n        $dropdown.destroy = function () {\r\n          bodyEl.off('click', onBodyClick);\r\n          destroy();\r\n        };\r\n\r\n        // Private functions\r\n\r\n        function onBodyClick (evt) {\r\n          if (evt.target === element[0]) return;\r\n          return evt.target !== element[0] && $dropdown.hide();\r\n        }\r\n\r\n        return $dropdown;\r\n\r\n      }\r\n\r\n      return DropdownFactory;\r\n\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsDropdown', function ($window, $sce, $dropdown) {\r\n\r\n    return {\r\n      restrict: 'EAC',\r\n      scope: true,\r\n      compile: function (tElement, tAttrs) {\r\n\r\n        // Support for inlined template (next sibling)\r\n        // It must be fetched before compilation\r\n        if (!tAttrs.bsDropdown) {\r\n          var nextSibling = tElement[0].nextSibling;\r\n          while (nextSibling && nextSibling.nodeType !== 1) {\r\n            nextSibling = nextSibling.nextSibling;\r\n          }\r\n          if (nextSibling && nextSibling.className.split(' ').indexOf('dropdown-menu') >= 0) {\r\n            tAttrs.template = nextSibling.outerHTML;\r\n            tAttrs.templateUrl = undefined;\r\n            nextSibling.parentNode.removeChild(nextSibling);\r\n          }\r\n        }\r\n\r\n        return function postLink (scope, element, attr) {\r\n\r\n          // Directive options\r\n          var options = {scope: scope};\r\n          angular.forEach(['template', 'templateUrl', 'controller', 'controllerAs', 'placement', 'container', 'delay', 'trigger', 'keyboard', 'html', 'animation', 'id', 'autoClose'], function (key) {\r\n            if (angular.isDefined(tAttrs[key])) options[key] = tAttrs[key];\r\n          });\r\n\r\n          // use string regex match boolean attr falsy values, leave truthy values be\r\n          var falseValueRegExp = /^(false|0|)$/i;\r\n          angular.forEach(['html', 'container'], function (key) {\r\n            if (angular.isDefined(attr[key]) && falseValueRegExp.test(attr[key])) options[key] = false;\r\n          });\r\n\r\n          // Support scope as an object\r\n          if (attr.bsDropdown) {\r\n            scope.$watch(attr.bsDropdown, function (newValue, oldValue) {\r\n              scope.content = newValue;\r\n            }, true);\r\n          }\r\n\r\n          // Initialize dropdown\r\n          var dropdown = $dropdown(element, options);\r\n\r\n          // Visibility binding support\r\n          if (attr.bsShow) {\r\n            scope.$watch(attr.bsShow, function (newValue, oldValue) {\r\n              if (!dropdown || !angular.isDefined(newValue)) return;\r\n              if (angular.isString(newValue)) newValue = !!newValue.match(/true|,?(dropdown),?/i);\r\n              if (newValue === true) {\r\n                dropdown.show();\r\n              } else {\r\n                dropdown.hide();\r\n              }\r\n            });\r\n          }\r\n\r\n          // Garbage collection\r\n          scope.$on('$destroy', function () {\r\n            if (dropdown) dropdown.destroy();\r\n            options = null;\r\n            dropdown = null;\r\n          });\r\n\r\n        };\r\n      }\r\n    };\r\n\r\n  });\r\n"],"sourceRoot":"/source/"}